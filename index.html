<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL to Base64URL Converter</title>
</head>
<body>
    <div id="result"></div>

    <script>
        // Função para converter URL para Base64URL
        function urlToBase64url(url) {
            return btoa(url)
                .replace(/\+/g, '-')
                .replace(/\//g, '_')
                .replace(/=/g, '');
        }

        // Função para processar a solicitação GET
        function handleRequest() {
            const urlParams = new URLSearchParams(window.location.search);
            const imageUrl = urlParams.get('url');
            if (imageUrl) {
                // Substitui {{foto}} pelo valor da variável no URL da imagem
                const baseUrl = 'https://caroldvx.github.io/base64/?url=';
                const fullUrl = `${baseUrl}${imageUrl}`;
                // Obtém a URL completa da imagem e converte para Base64URL
                const base64url = urlToBase64url(fullUrl);
                const result = { base64url: base64url };
                document.getElementById('result').innerText = JSON.stringify(result);
            } else {
                const error = { error: "Please provide a URL parameter." };
                document.getElementById('result').innerText = JSON.stringify(error);
            }
        }

        // Processa a solicitação quando a página é carregada
        window.onload = handleRequest;
    </script>
</body>
</html>
